# 第二章 数据通信基础

## 第一节 基本概念

**计算机网络**是**计算机技术**和**通信技术**相结合的产物，通信负责了物理实现，很大程度决定了网络的规模和效率

1. 消息（Message）与信息（Information）
- 消息定义为人类可感知的五官感受，声音、文字、图像、气味等
- 信息是一个抽象概念，是消息中所包含的有意义的内容

> 信息是对事物状态或存在方式的不确定性表述。信息是可以度量的。其大小与消息的不确定性，即概率成反比，某件事情发生的概率越大，其产生的信息量越小；反之则越大。——香农《通信的数学原理》对信息的数学定义

2. 通信（Communication）
- 香农定义：通信的本质就是在一点**精确**或**近似地**再生另一点的信息

3. 信号（Signal）
- 信息传递的载体，通常是电磁或光的形式
- 利用电平、电流和频率等物理变化量来表示信息
- 在数学上描述为：以时间为自变量、以表示信息的某个参量

例如：正弦波信号 `y(t) = Asin(ωt + θ)`

信号有连续、离散之分，可以通过各种变换来提高传输效率

4. 数据（Data）
- 是对客观事物的性质状态及相互关系等进行记载的物理符号及组合
- 大量的信息中往往蕴藏着价值信息和规律，通过挖掘为决策提供依据

5. 数据通信
- 是相对电话、广播通信而言的
- 信息以编码的方式被处理和存储
- 实现数据的远距离传输就是数据通信

6. 数据通信系统的模型
- 通信的作用是从信源传送到一或多个目的地，将此过程中的一切技术设备、传输媒介合称为通信系统
- 核心都应包括：
  - 信源
  - 发送设备
  - 传输媒介（信道）：会接触到噪声源
  - 接收设备
  - 信宿

7. 模拟通信与数字通信
- 模拟信号
  - 是指信号的的因变量完全随连续消息的变化而变化的信号
  - 自变量可连续，可离散
  - 因变量一定是连续的
- 数字信号
  - 是指表示消息的因变量是离散的，自变量时间的取值也是离散的信号
  - 因变量的状态是有限的

- 二者在一定条件下可以互转
  - 模拟信号 -> 采样、量化、编码 -> 数字信号
  - 数字信号 -> 解码、平滑 -> 模拟信号

- 数据通信系统与数字通信系统的区别：
  - 数字通信系统：信道中传输的信号是离散的数字信号
  - 数据通信系统：信源、信宿两端处理的是二进制数据，既可以是数字信号，也可以是模拟信号

- 数字通信优势更多，多被采用

## 第二节 传输方式

### 一、按传输方向

1. 单向通信
- 又称**单工**通信，同一时间只能有一个方向的通信，如无线电广播

2. 双向交替通信
- 又称**半双工**通信，双方都可以发送但不能同时，如无线电对讲系统

3. 双向同时通信
- 又称**全双工**通信，同时双向通信，如电话、计算机

### 二、按二进制数据传输时空顺序

计算机能处理的最小单位是字节（Byte）,由 8bit 组成

计算机内部部件、计算机与外部设备、计算机之间传输

1. 并行通信
- 为 byte 的每一个 bit 都设置传输通道，全部 bit 同时传送
- 传输快，消耗材料多，造价高，不适于长距离传输

2. 串行通信
- 只设置一条通道，全部 bit 依次传输
- 节省线路开销，传输慢，比如 RS-232、USB

### 三、按发送、接收步调一致性

通信系统的可靠性依赖于很好的实现同步

即收发两端动作统一、保持收发步调一致的过程，收方按照发送方发送信息的重复频率和起止时间来接收数据

根据发送、接收两端的时钟是独立还是同步分为两种同步方式

1. 异步式同步
- 以 byte 为单位独立发送，一次一符，一符 5~8 bit 来表示
- 每符前加一个起始位，后加一或二个停止位，无字符发送时，一直发送停止位
- 接收方以两标识位来判断始末，并以字节为单位接收
- 不需要在两端传输时钟信号，实现简单，效率低，适用于低速传输

2. 同步式同步
- 以数据块为单位进行发送，块内包含多个 byte
- 块前加起始位，块后加停止位
- 接收方按块接收
- 需建立同步时钟，实现发咋，效率高，开销小，适用高速传输

### 四、按是否需要经过调制

基带信号，即基本频带信号，计算机发出的原始数据信号，用固定的高低电平表示二进制数字 0、1

频率较低，信号频谱从 0 或附近开始，功率主要集中在有限的频带，低通特性

传送距离短时，衰减小，信号内容不变，适合在近距离、有线信道中传输

1. 基带传输
- 直接在信道中传送基带信号
- 以太网、令牌环网等计算机局域网

实际中许多信道不具有低通特性，而具有带通特性，所以不适合传输基带信号

2. 频带传输
- 通过调制，成为载波信号，将基带信号携带的信息传送出去
- 调制方法：
  - 调幅（AM）：载波**振幅**随数字基带信号变化，0 无载波，1 有载波
  - 调频（FM）：载波**频率**随数字基带信号变化，0 f1, 1 f2
  - 调相（PM）：载波**初始相位**随数字基带信号变化，0 0°，1 180°

更为复杂的**正交幅调制（QAM）**、**正交频分复用**（OFDM）等调制技术可以获得更高信息传输速率

- 计算机连接电话线使用的**调制解调器（MODEM）**
- 数字信号 -> 模拟信号 调制
- 模拟信号 -> 数字信号 解调

## 第三节 性能指标

有效性、可靠性、适应性、经济性和可维护性等指标

- 模拟通信系统：主要用带宽（信道带宽、信号传输带宽）来评价有效性，用信/噪比（可用信号功率/噪声功率）来评价可靠性
- 数字通信系统：主要用传输速率（码元速率、信息速率）和频带利用率来评价有效性

### 一、有效性

1. 码元速率 `Rв`，又称**波特率**：每秒传送码元数，单位为波特（Baud）
- 用时间间隔相同的符号来表示一个离散值，间隔内的信号称为**码元**，间隔称为**码元长度**
- `Rв = 1/T`，M: 码元长度（s）

2. 信息速率 `Rь`，又称**比特率**：每秒传送的二进制比特数，单位为 比特/秒（bit/s）
- 码元含有若干比特，通常规定一个二进制码元含 1 bit 信息量
- 则一个四进制码元携带 2bit，M 进制码元携带 ㏒₂M bit
- `Rь = Rв㏒₂M`
- 计算：八进制信号，码元速率为 1200 Baud，则信息速率为 1200 * (log₂8 = 3) = 3600 bit/s

3. 频带利用率 `η`：每赫兹内所实现的传输速率
- 尽可能少占带宽时传输更多的数据
- `η = Rв/B` 或 `η = Rь/B`，B: 信号带宽

4. 信道极限速率 `C`：单位为 bit/s
- 信道存在物理限制，超出则失真过大，无法还原原始信号
- `C = Wlog₂(1+S/N)`，香农公式，W: 信道带宽，S: 平均功率，N: 高斯噪声功率
- 极限速率取决于带宽和信/噪比，只要比极限低，就一定存在实现无差错传输的方法

### 二、可靠性

1. 误码率 `Pₑ`：接收到的错误码元数占传输总码元数的比例
- `Pₑ = Nₑ/N`，N: 总码元数

2. 误信率（误比特率） `Pь`：接收到的错误比特数占传输总比特数的比例
- `Pь = Nᵇₑ/Nᵇ`，Nᵇ: 总比特数

## 第四节 传输信道

- 狭义：传输介质
- 广义：还有通信系统的变换装置，如：发送设备、接收设备、天线、调制器

### 一、有线信道

以导线为传输介质

1. 架空明线：平行且相互分离或架空裸线线路
- 长距离：16 话路，150 kHz
- 短距离：28 话路，300 kHz
- 传输损耗地，易受天气、电磁干扰，噪声敏感，带宽有线，基本淘汰

2. 双绞线：两两绝缘并排绞合，减少相邻电磁干扰
- 多对双绞线封装组成双绞线电缆，简称非屏蔽双绞线（UTP）
- 封装时加金属屏蔽层，提高抗干扰能力，称为屏蔽双绞线（STP）
- 模拟、数字皆可，通讯距离几到十几公里
- 主要用于基带传输，衰落虽频率升高而增大
- 1995 年，EIA 规定 5 类 UTP，主要差别是单位长度绞合次数
  - 3 类（10BASE-T），16 MHz，绞合长度 7.5~10 cm，应用于电话网络
  - 5 类（100BASE-T），100 MHz 绞合长度 0.6~0.85 cm，应用于局域网

3. 同轴电缆：同轴两个导体组成，中间填充绝缘实心介质
- 外导体是空心圆柱形网状编织金属导体，能起到屏蔽网作用，抵抗电磁干扰，接地
- 内导体是金属导线，通常为铜线
- 可封装成多芯同轴电缆
- 应用于早期局域网，和有线电视网络
- 主要用于频带传输，高质量带宽接近 1GHz

4. 光纤：二氧化硅光导纤维
- 损耗低、频带宽、抗腐蚀、不受电磁干扰、造价低
- 利用光的全反射，由两种折射率不同的导光介质复合纤维制成
  - 内层：纤维中心（Centeral Core）
  - 外层：包层（Clading Layer）
- 种类：阶跃（折射率）型、梯度（折射率）型；单模（激光二极管）、多模（发光二极管）

```
基带电信号
 ↓
基带处理
 ↓
调制电信号
 ↓
光调制器 ← 光源
 ↓
光纤
 ↓
光检测器：PIN 光二极管、雪崩二极管（APD 管）
 ↓
解调电信号
 ↓
基带处理
 ↓
基带电信号
```

线路中还可能使用中继器，实现信号放大、再生，补偿传输损耗

### 二、无线信道

利用电磁波在空间传播，不受约束

国际电信联盟 ITU 定期召开世界无线电通信大会，负责指定无线电频率使用的国际协议

我国无线电频率使用的规划和管理由工信部无线电管理局负责

- 外层空间传播：自由空间传播
- 近地空间传播：受地面和大气层影响，可分为视线传播、地波、天波

## 第五节 编码

### 一、模拟数据编码

模拟信道中传输的模拟信号称为**载波**

```
y(t)=Asin(ωt+φ)
```

A: 模拟信号振幅，ω: 模拟信号频率，φ: 初始相位

调制的基本思想：通过载波信号上面的三个参数变化来表示 0 和 1

对应的调制方法：

1. 振幅键控（ASK）：改变载波振幅
```
       Asin(ωt+φ)  -> 1
y(t)={
       0
```

2. 频移键控（FSK）：改变频率
```
       Asin(ω₁t+φ)  -> 1
y(t)={
       Asin(ω₂t+φ)  -> 0
```

3. 相移键控（PSK）：改变初始相位
```
       Asin(ω+0)  -> 1
y(t)={
       Asin(ωₜ+π)  -> 0
```

### 二、数字数据编码

将原始二进制数据变换成数字脉冲序列从而实现基带传输方法

基带传输在不改变数据信号波形时直接传输数字信号，可以得到很高的数据传输速率和通信效率

1. 单极不归零码 NRZ：Not Return to Zero
- 零电平 0，正负电平 1
- 易于产生，但不适合长距离传输
- 适用于计算机内部或外设

2. 双极不归零编码
- 负电平 0，正电平 1
- 不会产生直流分量，有利信道传输，抗干扰
- ITU-T V.24 和 EIA RS-232C 采用

3. 单极归零码 RZ
- 区别于 NRZ，中间时刻需要回到零电平
- 码元不为零占一个码元周期的百分比称为占空比

4. 双极归零码
- 双极部分参上上
- 归零部分参上
- 有利于时钟信号提取

5. 差分码
- 又称为相对码，NRZ、RZ 等为绝对码
- 不是利用脉冲幅值的绝对电平来表示 0、1，而是用电平的变化与否
- 跳变 1，无跳变 0

6. 双相码 Biphase Code
- 又称为曼彻斯特码，只有正负两种电平，中间时刻需要跳变
- 正跳负 1，负跳正 0
- 差分双相码：开始处跳变 1，无跳变 0，带宽开销大，适用近距离
- 10Mb/s 以太网采用曼彻斯特码，IEEE 802.5 令牌环网采用差分曼彻斯特码

7. 多元码
- 利用多种脉冲，多电平
- 高速书传输，提高传输系统频带利用率
- 能表示 00、01、10、11

### 三、模拟信号的数字编码

模拟信号转数字信号

```
模拟转数字 A/D -> 数字信号基带传输、调制传输 -> 数字转模拟 D/A
```

A/D 需要经过三个环节
- 抽样：指以一定的间隔时间采集模拟信号的瞬间值
- 量化：根据某种规则将瞬间值用数值表示出来
- 编码：将数值变换成一组二进制码

1. 抽样定理
- 是如何抽样才能在接收端无失真还原抽样信号问题的理论依据

```
假设模拟信号范围 fl~fh，带宽 B = fh - fl
B > fl 低通， B <= fl 带通
```

低通抽样定理：对于一个频带有限模拟信号，抽样频率 >= 两倍频带，抽样间隔 <= 1/两倍频带，则模拟信号将被抽样值完全确定，即抽样后的离散信号包含了原模拟信号的全部信息。抽样频率 < 两倍频带，会产生混叠失真，无法还原原信号。满足无失真抽样最小抽样频率称为奎奈斯特速率。

带通抽样定理：对于一个频带限定在 fl ~ fh，带宽 B = fh - fl 的模拟信号，其最小抽样频率满足 ```fs = 2B(1 + k/n)```，其中 n 为 ```fh/B``` 的整数部分，k 为 ```fh/B``` 的小数部分

2. 脉冲编码调制 PCM： Pulse Code Modulation

按照抽样定理，将时间上连续的模拟信号转换为时间上离散的抽样信号

即指定有限个量化电平，化无穷为有穷

根据量化间隔是否相等划分为：均匀、非均匀量化，实际中常采用非均匀量化

非均匀量化对大信号压缩，对小信号扩张，A 律 13 折，μ 律 15 折

3. 编码

量化后的有限个电平数 M = 2 的 N 次，则可以使用 N 位二进制码来编码

比如量化电平数 8，可以用 3 位二进制码， 000、001..111 来表示

三种常用的二进制码有：

- 自然二进制码：利用二进制数与十进制数转换来表示相应的量化电平
- 折叠二进制码：沿中心电平上下对称，且适于表示正负对称的双极性信号的一种码型。

  最高位代表极性，正极性则对应自然二进制码各位相同，负极性则对应自然二进制码各位取反，

  因此，双极性信号可以采用单极性编码方法，简化编码过程。

  对小信号误码影响小，多适用于语音信号 PCM 系统

- 格雷二进制码

理论上码的位数越多，所表示的量化电平就越多，量化误差就越小，通信质量就越高，但会使设备更复杂，对码元速率要求更高，增大传输带宽

语音通信常采用 8 位 PCM 编码

## 第六节 复用技术

